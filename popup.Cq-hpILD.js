import{c as d,r as n,g as D,j as e,T as R,S as E,a as j,s as M,b as S,d as I,e as v,f as L,R as A}from"./assets/sanitize-BsxYmWUj.js";const U=d("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),$=d("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),q=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),H=()=>{const[o,r]=n.useState([]),[c,u]=n.useState({theme:"light",autoSave:!1,autoSaveInterval:30}),[l,h]=n.useState(""),[b,f]=n.useState(!0),[m,t]=n.useState("");n.useEffect(()=>{N()},[]),n.useEffect(()=>{document.documentElement.setAttribute("data-theme",c.theme)},[c.theme]);async function N(){const s=await D();r(s.sessions),u(s.settings),f(!1)}async function p(){if(!l.trim()){t("Please enter a session name");return}const a=(await chrome.tabs.query({currentWindow:!0})).filter(i=>i.url&&!i.url.startsWith("chrome://")).map(i=>({url:i.url,title:S(i.title||"Untitled"),favIconUrl:i.favIconUrl})),g=[{id:I(),name:S(l),tabs:a,createdAt:Date.now(),tabCount:a.length},...o];await v(g),r(g),h(""),t(`Saved ${a.length} tabs`),setTimeout(()=>t(""),3e3)}async function y(s){for(const a of s.tabs)await chrome.tabs.create({url:a.url,active:!1});t(`Restored ${s.tabCount} tabs`),setTimeout(()=>t(""),3e3)}async function k(s){const a=o.filter(x=>x.id!==s);await v(a),r(a)}function C(){const s={...c,theme:c.theme==="light"?"dark":"light"};u(s),M(s)}function T(){chrome.runtime.openOptionsPage()}async function w(){const s=await chrome.runtime.sendMessage({action:"closeDuplicateTabs"});t(`Closed ${s.count} duplicate tabs`),setTimeout(()=>t(""),3e3)}async function z(){const s=await chrome.runtime.sendMessage({action:"suspendUnusedTabs"});t(`Suspended ${s.count} tabs`),setTimeout(()=>t(""),3e3)}return b?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs("div",{className:"popup",children:[e.jsxs("header",{className:"popup-header",children:[e.jsx("h1",{children:"SecureTab"}),e.jsxs("div",{className:"header-actions",children:[e.jsx(R,{settings:c,onToggle:C}),e.jsx("button",{onClick:T,className:"icon-btn",title:"Settings",children:e.jsx(E,{size:20})})]})]}),m&&e.jsx("div",{className:"message",children:m}),e.jsxs("section",{className:"save-section",children:[e.jsx("h2",{children:"Save Current Session"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",value:l,onChange:s=>h(s.target.value),placeholder:"Session name...",className:"input",maxLength:50,onKeyPress:s=>s.key==="Enter"&&p()}),e.jsxs("button",{onClick:p,className:"btn-primary",disabled:!l.trim(),children:[e.jsx(q,{size:16}),e.jsx("span",{children:"Save"})]})]})]}),e.jsxs("section",{className:"quick-actions",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{onClick:w,className:"btn-secondary",children:[e.jsx(j,{size:16}),"Close Duplicates"]}),e.jsxs("button",{onClick:z,className:"btn-secondary",children:[e.jsx(U,{size:16}),"Suspend Unused"]})]})]}),e.jsxs("section",{className:"sessions-section",children:[e.jsxs("h2",{children:["Saved Sessions (",o.length,")"]}),e.jsx("div",{className:"sessions-list",children:o.length===0?e.jsx("p",{className:"empty-state",children:"No saved sessions yet"}):o.map(s=>e.jsxs("div",{className:"session-item",children:[e.jsxs("div",{className:"session-info",children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{children:[s.tabCount," tabs Â· ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"session-actions",children:[e.jsx("button",{onClick:()=>y(s),className:"icon-btn",title:"Restore",children:e.jsx($,{size:18})}),e.jsx("button",{onClick:()=>k(s.id),className:"icon-btn delete",title:"Delete",children:e.jsx(j,{size:18})})]})]},s.id))})]})]})};L.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(H,{})}));
