import{c as g,r as h,g as P,h as y,j as e,T as _,S as G,a as M,i as Q,k as W,b as Y,s as A,f as Z,R as K}from"./assets/sanitize-BsxYmWUj.js";const D=g("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),U=g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),X=g("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),ee=g("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),te=g("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),se=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ae=g("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function ne(n,o){const i=JSON.stringify(n,null,2),x=new Blob([i],{type:"application/json"}),r=URL.createObjectURL(x),l=document.createElement("a");l.href=r,l.download=o,l.click(),URL.revokeObjectURL(r)}function oe(n){let o=`<!DOCTYPE NETSCAPE-Bookmark-file-1>
`;o+=`<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
`,o+=`<TITLE>Bookmarks</TITLE>
`,o+=`<H1>Bookmarks</H1>
`,o+=`<DL><p>
`,n.forEach(l=>{const u=l.title.replace(/"/g,"&quot;"),j=l.url.replace(/"/g,"&quot;");o+=`    <DT><A HREF="${j}" ADD_DATE="${Math.floor(l.dateAdded/1e3)}">${u}</A>
`}),o+=`</DL><p>
`;const i=new Blob([o],{type:"text/html"}),x=URL.createObjectURL(i),r=document.createElement("a");r.href=x,r.download="bookmarks.html",r.click(),URL.revokeObjectURL(x)}function ie(n){const x=new DOMParser().parseFromString(n,"text/html").querySelectorAll("a[href]"),r=[];return x.forEach(l=>{const u=l.getAttribute("href"),j=l.textContent||"Untitled",c=l.getAttribute("ADD_DATE");u&&(u.startsWith("http://")||u.startsWith("https://"))&&r.push({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:j.trim(),url:u,dateAdded:c?parseInt(c)*1e3:Date.now()})}),r}const le=()=>{var T;const[n,o]=h.useState([]),[i,x]=h.useState({theme:"light",autoSave:!1,autoSaveInterval:30}),[r,l]=h.useState("grid"),[u,j]=h.useState(""),[c,f]=h.useState(null),[b,I]=h.useState(!1),[B,z]=h.useState(!0),[N,p]=h.useState("");h.useEffect(()=>{R(),H()},[]),h.useEffect(()=>{document.documentElement.setAttribute("data-theme",i.theme)},[i.theme]);async function R(){const t=await P();o(t.collections),x(t.settings),z(!1)}async function H(){const t=await chrome.bookmarks.getTree(),s=[];function a(k){k.forEach(m=>{m.url&&Q(m.url)&&s.push({id:m.id,title:Y(m.title||"Untitled"),url:W(m.url),dateAdded:m.dateAdded||Date.now()}),m.children&&a(m.children)})}if(a(t),!n.find(k=>k.id==="chrome-bookmarks")&&s.length>0){const m=[{id:"chrome-bookmarks",name:"Chrome Bookmarks",bookmarks:s,parentId:null,createdAt:Date.now()},...n];await y(m),o(m)}}function $(){const t={...i,theme:i.theme==="light"?"dark":"light"};x(t),A(t)}async function S(t,s){const a={...i,[t]:s};x(a),await A(a),p("Settings saved"),setTimeout(()=>p(""),2e3)}function O(){ne({collections:n,settings:i},"securetab-backup.json"),p("Exported to JSON"),setTimeout(()=>p(""),2e3)}function q(){const t=n.flatMap(s=>s.bookmarks);oe(t),p("Exported to HTML"),setTimeout(()=>p(""),2e3)}function F(t){var d;const s=(d=t.target.files)==null?void 0:d[0];if(!s)return;const a=new FileReader;a.onload=async k=>{var L;const m=(L=k.target)==null?void 0:L.result,C=ie(m),E=[{id:`imported-${Date.now()}`,name:`Imported from ${s.name}`,bookmarks:C,parentId:null,createdAt:Date.now()},...n];await y(E),o(E),p(`Imported ${C.length} bookmarks`),setTimeout(()=>p(""),3e3)},a.readAsText(s),t.target.value=""}async function J(t){if(!confirm("Delete this collection?"))return;const s=n.filter(a=>a.id!==t);await y(s),o(s),c===t&&f(null)}async function V(t,s){const a=n.map(d=>d.id===t?{...d,bookmarks:d.bookmarks.filter(k=>k.id!==s)}:d);await y(a),o(a)}const v=h.useMemo(()=>{var s;let t=c?((s=n.find(a=>a.id===c))==null?void 0:s.bookmarks)||[]:n.flatMap(a=>a.bookmarks);if(u.trim()){const a=u.toLowerCase();t=t.filter(d=>d.title.toLowerCase().includes(a)||d.url.toLowerCase().includes(a))}return t},[n,c,u]),w=h.useMemo(()=>{const t=new Map;return n.flatMap(s=>s.bookmarks).forEach(s=>{t.set(s.url,(t.get(s.url)||0)+1)}),Array.from(t.entries()).filter(([s,a])=>a>1).map(([s])=>s)},[n]);return B?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs("div",{className:"options",children:[e.jsxs("header",{className:"options-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"SecureTab Manager"}),e.jsxs("div",{className:"search-container",children:[e.jsx(se,{size:18}),e.jsx("input",{type:"text",value:u,onChange:t=>j(t.target.value),placeholder:"Search bookmarks...",className:"search-input"})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{onClick:()=>l("grid"),className:`icon-btn ${r==="grid"?"active":""}`,title:"Grid view",children:e.jsx(ee,{size:20})}),e.jsx("button",{onClick:()=>l("list"),className:`icon-btn ${r==="list"?"active":""}`,title:"List view",children:e.jsx(te,{size:20})})]}),e.jsx(_,{settings:i,onToggle:$}),e.jsx("button",{onClick:()=>I(!b),className:"icon-btn",title:"Settings",children:e.jsx(G,{size:20})})]})]}),N&&e.jsx("div",{className:"message",children:N}),b&&e.jsxs("div",{className:"settings-panel",children:[e.jsx("h2",{children:"Settings"}),e.jsx("div",{className:"setting-item",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:i.autoSave,onChange:t=>S("autoSave",t.target.checked)}),"Auto-save sessions"]})}),i.autoSave&&e.jsx("div",{className:"setting-item",children:e.jsxs("label",{children:["Auto-save interval (minutes):",e.jsx("input",{type:"number",value:i.autoSaveInterval,onChange:t=>S("autoSaveInterval",parseInt(t.target.value)||30),min:"5",max:"120",className:"input",style:{width:"100px",marginLeft:"10px"}})]})}),e.jsxs("div",{className:"setting-item",children:[e.jsx("h3",{children:"Export/Import"}),e.jsxs("div",{className:"export-buttons",children:[e.jsxs("button",{onClick:O,className:"btn-secondary",children:[e.jsx(U,{size:16}),"Export JSON"]}),e.jsxs("button",{onClick:q,className:"btn-secondary",children:[e.jsx(U,{size:16}),"Export HTML"]}),e.jsxs("label",{className:"btn-secondary",style:{cursor:"pointer"},children:[e.jsx(ae,{size:16}),"Import HTML",e.jsx("input",{type:"file",accept:".html",onChange:F,style:{display:"none"}})]})]})]}),w.length>0&&e.jsx("div",{className:"setting-item",children:e.jsxs("p",{className:"warning",children:["⚠️ ",w.length," duplicate bookmark URLs detected"]})})]}),e.jsxs("div",{className:"options-content",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h2",{children:"Collections"})}),e.jsxs("nav",{className:"collections-nav",children:[e.jsxs("button",{onClick:()=>f(null),className:`collection-item ${c===null?"active":""}`,children:[e.jsx(D,{size:18}),e.jsx("span",{children:"All Bookmarks"}),e.jsx("span",{className:"count",children:n.reduce((t,s)=>t+s.bookmarks.length,0)})]}),n.map(t=>e.jsxs("div",{className:"collection-wrapper",children:[e.jsxs("button",{onClick:()=>f(t.id),className:`collection-item ${c===t.id?"active":""}`,children:[e.jsx(X,{size:18}),e.jsx("span",{children:t.name}),e.jsx("span",{className:"count",children:t.bookmarks.length})]}),c===t.id&&t.id!=="chrome-bookmarks"&&e.jsx("button",{onClick:()=>J(t.id),className:"delete-collection-btn",title:"Delete collection",children:e.jsx(M,{size:14})})]},t.id))]})]}),e.jsxs("main",{className:"main-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{children:c?(T=n.find(t=>t.id===c))==null?void 0:T.name:"All Bookmarks"}),e.jsxs("p",{className:"subtitle",children:[v.length," bookmarks"]})]}),e.jsx("div",{className:`bookmarks-${r}`,children:v.length===0?e.jsx("p",{className:"empty-state",children:"No bookmarks found"}):v.map(t=>e.jsxs("div",{className:"bookmark-card",children:[e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"bookmark-link",children:[t.favIconUrl?e.jsx("img",{src:t.favIconUrl,alt:"",className:"favicon",onError:s=>s.currentTarget.style.display="none"}):e.jsx("div",{className:"favicon-placeholder",children:e.jsx(D,{size:16})}),e.jsxs("div",{className:"bookmark-info",children:[e.jsx("h3",{children:t.title}),e.jsx("p",{children:new URL(t.url).hostname})]})]}),e.jsx("button",{onClick:()=>{var a;const s=c||((a=n.find(d=>d.bookmarks.some(k=>k.id===t.id)))==null?void 0:a.id);s&&V(s,t.id)},className:"delete-bookmark-btn",title:"Delete bookmark",children:e.jsx(M,{size:14})})]},t.id))})]})]})]})};Z.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(le,{})}));
